### 网络要求

> HFish管理端会主动访问如下网络域名

HFish支持IPv4和IPv6地址环境，可以在完全隔离互联网的内部网络工作，但为了最大限度感知真实威胁和对接云端接口消费威胁情报，以及接受自动化升级服务，微步在线强烈建议客户允许HFish管理端访问互联网，为兼顾安全性和服务可用性，推荐用户仅允许HFish管理端主动访问如下网络域名、地址和端口：

| 开放地址                | 协议/端口 | 访问目的                                         |
| ----------------------- | --------- | ------------------------------------------------ |
| hfish.io                | TCP/443   | **用于官网升级功能，建议开启**                   |
| zoo.hfish.net           | TCP/443   | 用于与云端高交互蜜罐进行通信，建议开启           |
| api.hfish.net           | TCP/443   | 用于攻击数据拉取，建议开启                       |
| hfish.cn-bj.ufileos.com | TCP/443   | 用于分发安装和升级包                             |
| api.threatbook.cn       | TCP/443   | 用于威胁情报查询，如果未启用该功能，无需开放     |
| open.feishu.cn          | TCP/443   | 用于飞书告警功能，如果未使用该功能，无需开放     |
| oapi.dingtalk.com       | TCP/443   | 用于钉钉告警功能，如果未使用该功能，无需开放     |
| qyapi.weixin.qq.com     | TCP/443   | 用于企业微信告警功能，如果未使用该功能，无需开放 |


```
注意：
1. HFish管理端仅需要通过NAT模式访问互联网，基于安全考虑，不建议用户将HFish管理端管理端口TCP/4433暴露在互联网；
2. 如果使用邮件通知，请开启相应邮件服务器的访问权限；
3. HFish支持 5 路syslog日志发送，便于与安全设备联动，请根据实际情况开放权限；
```


### 安全配置

##### 管理端安全要求

> 管理端应部署在安全区，只向少部分有网络管理权限和安全分析能力工作的人员和设备开放Web和SSH端口

管理端用于配置管理的Web页面开启了https，默认访问端口为TCP/4433，端口和登录URL，可以在config.ini中自行配置。
如果管理端主机地址为192.168.11.11，那么应该在浏览器中输入如下的URL进行访问。

https://192.168.11.11:4433/web/


此外管理端还会开放另外两个端口，节点数据回传端口TCP/4434和SSH服务默认访问端口TCP/22。

```
强烈建议：
- TCP/4433端口和TCP/22端口 “只能” 被安全区的管理设备访问；
- TCP/4434端口“必须能”被蜜罐节点访问;
```


##### 节点端安全要求

> 节点直接面对攻击者，建议遵循以下安全配置：

1. 如果用户同时有外网和内部需求，强烈建议用户分别在外网和内网部署完全独立的两套管理端和节点端；
2. 如果有节点需要能被外网访问，那么建议把节点和管理端部署在DMZ区；
3. 外网节点除了能访问管理端的TCP/4434端口外，不能有权限访问内网中的任何资产；
4. 内网节点除了开放蜜罐服务相应端口外，其它任何端口都不应该在网络中能被用户访问到。考虑安全区设备有维护节点主机的需求，可以向有限的设备开放SSH端口；
